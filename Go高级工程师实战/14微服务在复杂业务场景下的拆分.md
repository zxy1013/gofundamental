**对业务进行建模**

![1639134182304](F:\markdown笔记\Go高级工程师实战\image\1639134182304.png)

业务和流程区分

![1639134340031](F:\markdown笔记\Go高级工程师实战\image\1639134340031.png)

**传统模式 -- 单体服务的缺陷** 上线需要排长队，所以需要拆分成为微服务

![1639134769337](F:\markdown笔记\Go高级工程师实战\image\1639134769337.png)

**微服务缺陷**  数据一致性 服务间的通信 服务间的部署 

![1639134849310](F:\markdown笔记\Go高级工程师实战\image\1639134849310.png)

**微服务拆分方式 -- 单体拆分**

![1639134985219](F:\markdown笔记\Go高级工程师实战\image\1639134985219.png)

**根据业务能力分解**

![1639135000023](F:\markdown笔记\Go高级工程师实战\image\1639135000023.png)

识别业务能力 --  以外卖举例

![1639135049048](F:\markdown笔记\Go高级工程师实战\image\1639135049048.png)

微服务分解成为

![1639135155823](F:\markdown笔记\Go高级工程师实战\image\1639135155823.png)

**子域分解** 出行：自行车 公交车 打车 飞机

![1639135240021](F:\markdown笔记\Go高级工程师实战\image\1639135240021.png)

**微服务拆分依据**

![1639135455123](F:\markdown笔记\Go高级工程师实战\image\1639135455123.png)

微服务拆分后的问题

![1639135583305](F:\markdown笔记\Go高级工程师实战\image\1639135583305.png)

**微服务之间的通信方式** 一对一  调用一个服务请求响应  一对多 发布订阅模式 

![1639135859901](F:\markdown笔记\Go高级工程师实战\image\1639135859901.png)

服务之间使用rpc一对一通信请求响应

![1639136029625](F:\markdown笔记\Go高级工程师实战\image\1639136029625.png)

![1639136056298](F:\markdown笔记\Go高级工程师实战\image\1639136056298.png)

任何服务都需要有熔断保护，不能被上层应用拖死

![1639136185381](F:\markdown笔记\Go高级工程师实战\image\1639136185381.png)

**服务注册中心注册服务发现** 查ip

![1639136252045](F:\markdown笔记\Go高级工程师实战\image\1639136252045.png)

异步消息进行服务集成 消息发布订阅

![1639136373609](F:\markdown笔记\Go高级工程师实战\image\1639136373609.png)

**Event Sourcing思想**

对数据的编辑操作 只记录修改历史 一般情况下只增不删

![1639136496719](F:\markdown笔记\Go高级工程师实战\image\1639136496719.png)

优化解决计算量太大的问题

![1639136556528](F:\markdown笔记\Go高级工程师实战\image\1639136556528.png)

**缺陷**

![1639136648059](F:\markdown笔记\Go高级工程师实战\image\1639136648059.png)

**微服务集成**

![1639137000408](F:\markdown笔记\Go高级工程师实战\image\1639137000408.png)

历史记录可能会涉及到很多模块的消息，所以劣势

![1639137213344](F:\markdown笔记\Go高级工程师实战\image\1639137213344.png)

![1639137051849](F:\markdown笔记\Go高级工程师实战\image\1639137051849.png)

将查询拆出来，因为读多改少，所以可以单独对读优化

![1639137171820](F:\markdown笔记\Go高级工程师实战\image\1639137171820.png)

![1639138257886](F:\markdown笔记\Go高级工程师实战\image\1639138257886.png)

**外部API模式** 用户和客户端通信

![1639138284880](F:\markdown笔记\Go高级工程师实战\image\1639138284880.png)

所以需要API Gateway 为了优化 更新 性能 和边缘需求

![1639138518592](F:\markdown笔记\Go高级工程师实战\image\1639138518592.png)

BFF 支持API组合功能 公共层：基础设施

![1639138797276](F:\markdown笔记\Go高级工程师实战\image\1639138797276.png)

